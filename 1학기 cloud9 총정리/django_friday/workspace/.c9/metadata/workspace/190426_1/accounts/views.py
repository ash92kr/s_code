{"changed":false,"filter":false,"title":"views.py","tooltip":"/190426_1/accounts/views.py","value":"from django.shortcuts import render, redirect, get_object_or_404\nfrom django.contrib.auth.decorators import login_required\nfrom django.views.decorators.http import require_POST, require_http_methods\nfrom django.contrib.auth import login as auth_login\nfrom django.contrib.auth import logout as auth_logout\nfrom django.contrib.auth.forms import UserCreationForm, AuthenticationForm  # 회원가입, 로그인 폼\n\n# Create your views here.\ndef signup(request):\n    \n    if request.user.is_authenticated:   # 로그인된 상태면 회원가입 불가\n        return redirect('posts:list')\n    \n    if request.method == \"POST\":\n        form = UserCreationForm(request.POST)\n        if form.is_valid():\n            user = form.save()\n            auth_login(request, user)   # 회원가입시 자동 로그인 전환\n            return redirect('posts:list')\n    else:\n        form = UserCreationForm()\n    context = {\n        'form': form,\n    }\n    return render(request, 'accounts/signup.html', context)\n\n\ndef login(request):\n    \n    if request.user.is_authenticated:\n        return redirect('posts:list')\n    \n    if request.method == \"POST\":\n        form = AuthenticationForm(request, request.POST)   # 인자가 2개 들어간다\n        if form.is_valid():\n            auth_login(request, form.get_user())  # form.get_user() 외우기\n            return redirect('posts:list')\n    else:\n        form = AuthenticationForm()\n    context = {\n        'form': form,\n    }\n    return render(request, 'accounts/login.html', context)\n    \n    \ndef logout(request):\n    auth_logout(request)\n    return redirect('posts:list')\n\n","undoManager":{"mark":-1,"position":-1,"stack":[]},"ace":{"folds":[],"scrolltop":360,"scrollleft":0,"selection":{"start":{"row":10,"column":53},"end":{"row":10,"column":53},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":19,"state":"start","mode":"ace/mode/python"}},"timestamp":1556246703977}